# Default values for libredesk chart

replicaCount: 1

image:
  repository: libredesk/libredesk
  pullPolicy: IfNotPresent
  tag: ""  # Defaults to chart appVersion

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

service:
  type: ClusterIP
  port: 9000

ingress:
  enabled: false
  className: ""
  annotations: {}
    # cert-manager.io/cluster-issuer: letsencrypt-prod
    # nginx.ingress.kubernetes.io/proxy-body-size: "100m"
  hosts:
    - host: libredesk.local
      paths:
        - path: /
          pathType: Prefix
  tls: []
  #  - secretName: libredesk-tls
  #    hosts:
  #      - libredesk.local

persistence:
  size: 10Gi
  storageClass: ""

resources: {}
  # limits:
  #   cpu: 1000m
  #   memory: 1Gi
  # requests:
  #   cpu: 500m
  #   memory: 512Mi

# PostgreSQL configuration
postgresql:
  enabled: true
  image:
    repository: postgres
    tag: "16-alpine"
    pullPolicy: IfNotPresent
  auth:
    username: libredesk
    password: libredesk
    database: libredesk
  persistence:
    size: 10Gi
    storageClass: ""
  resources: {}

# Redis configuration
redis:
  enabled: true
  image:
    repository: redis
    tag: "7-alpine"
    pullPolicy: IfNotPresent
  resources: {}

# System user password (auto-generated if not provided).
systemUserPassword:
  existingSecret:
    enabled: false
    name: ""
    key: "systemUserPassword"

# Libredesk application configuration
config:
  app:
    logLevel: "info"
    env: "prod"
    checkUpdates: true
    # IMPORTANT: Generate using `openssl rand -hex 16` - must be 32 characters long
    encryptionKey: "CHANGE-ME-32-CHAR-RANDOM-STRING!"
    # Use encryption key from an existing Kubernetes Secret instead of plain text above.
    # When set, config.app.encryptionKey is ignored.
    existingSecret:
      enabled: false
      name: ""
      key: "encryptionKey"
  
  upload:
    provider: "fs"
    fs:
      uploadPath: "/libredesk/uploads"
  
  db:
    host: "libredesk-postgres"
    port: 5432
    user: "libredesk"
    password: "libredesk"
    database: "libredesk"
    sslMode: "disable"
    maxOpen: 30
    maxIdle: 30
    maxLifetime: "300s"
    # Use password from an existing Kubernetes Secret instead of plain text above.
    # When set, config.db.password is ignored.
    existingSecret:
      enabled: false
      name: ""
      key: "password"

  redis:
    address: "libredesk-redis:6379"
    user: ""
    password: ""
    db: 0
    # Use password from an existing Kubernetes Secret instead of plain text above.
    # When set, config.redis.password is ignored.
    existingSecret:
      enabled: false
      name: ""
      key: "password"
  
  message:
    outgoingQueueWorkers: 10
    incomingQueueWorkers: 10
    messageOutgoingScanInterval: "50ms"
    incomingQueueSize: 5000
    outgoingQueueSize: 5000
  
  notification:
    concurrency: 2
    queueSize: 2000
  
  automation:
    workerCount: 10
  
  autoassigner:
    autoassignInterval: "5m"
  
  webhook:
    workers: 5
    queueSize: 10000
    timeout: "15s"
  
  conversation:
    unsnoozeInterval: "5m"
    draftRetentionPeriod: "360h"
  
  sla:
    evaluationInterval: "5m"

